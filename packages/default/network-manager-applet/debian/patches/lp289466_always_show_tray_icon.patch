=== modified file 'src/applet.c'
---
 src/applet.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

Index: b/src/applet.c
===================================================================
--- a/src/applet.c
+++ b/src/applet.c
@@ -2431,6 +2431,8 @@ foo_client_setup (NMApplet *applet)
 
 	if (nm_client_get_manager_running (applet->nm_client))
 		g_idle_add (foo_set_initial_state, applet);
+
+	applet_schedule_update_icon (applet);
 }
 
 static GdkPixbuf *
@@ -2618,7 +2622,6 @@ applet_update_icon (gpointer user_data)
 	applet->update_icon_id = 0;
 
 	nm_running = nm_client_get_manager_running (applet->nm_client);
-	gtk_status_icon_set_visible (applet->status_icon, nm_running);
 
 	/* Handle device state first */
 
